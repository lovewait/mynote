## 应用层的概念
### 应用层的地位和作用
应用层协议是网络和用户之间的接口,即网络用户是通过不同的应用协议来使用网络的.应用层协议向用户提供各种实际的网络应用服务,使得上网者更方便的使用网络上的资源.
## 域名系统
### IP地址与域名
1. IP地址:
> 为了确保通信时能相互识别,在Internet上的每台主机都必须有一个唯一的标识,即主机的IP地址.IP协议就是根据IP地址实现信息传递的.
IP地址由32位(即4字节)二进制数组成,为书写方便,常将每个字节作为一段并以十进制数来表示,每段间用"."分隔.
IP地址由网络标识和主机标识两部分组成.常用的IP地址有A、B、C三类,每类均规定了网络标识和主机标识在32位中所占的位数.
A类地址一般分配给具有大量主机的网络使用,B类地址通常分配给规模中等的网络使用,C类地址通常分配给小型局域网使用.为了确保唯一性,IP地址由世界各大地区的权威机构Inter NIC(Internet Network Information Center)管理和分配
在Ip地址的某个网络标识中,可以包含大量的主机,而在实际应用中不可能将这么多的主机连接到单一的网络中,这将给网络寻址和管理带来不便.为了解决这个问题,可以在网络中引入"子网"的概念.
将主机标识域进一步划分为子网标识和子网主机标识,通过灵活定义子网标识的位数,可以控制每个子网的规模.将一个大型网络划分为若干个既相对独立又相互联系的子网后,网络内部各子网便可以独立寻址和管理,各子网间通过跨子网的路由器连接,这样也提高了网络的安全性.
利用子网掩码可以判断两台主机是否在同一子网中.子网掩码与IP地址一样也是32位二进制数,不同的是它的子网主机标识部分为全"0".若两台主机的IP地址分别于它们的子网掩码相"与"后的结果相同,则说明这两台主机在同一个子网中.

2. 域名:
32位二进制数的IP地址对计算机来说十分有效,但用户使用和记忆都很不方便.为此,Internet引进了字符形式的IP地址,即域名(Domain Name).但是因特网通信仍然要使用IP地址来标识主机,因此必须提供一种映射机制来实现域名和IP地址之间的转换,这就是域名系统所要解决的问题.域名采用层次结构的基于"域"的命名方案,任何一个连在因特网上的主机或路由器,都有一个唯一的层次结构的名字,即域名.域名只是一个逻辑概念,并不反映出计算机所在的物理地点.

### 域名解析原理
当应用程序需要将一个主机域名映射为IP地址时,就调用域名解析函数(Resolve),解析函数将待转换的域名放在DNS请求中,以UDP报文方式发给本地域名服务器(使用UDP是为了减少开销).本地的域名服务器在查找域名后,将对应的IP地址放在应答报文中返回.应用程序获得目的主机的IP地址后即可进行通信.若域名服务器不能回答该请求,则此域名服务器就暂时成为DNS中的另一个客户,知道找到能回答该请求的域名服务器为止.
每一个域名服务器都管理这一个DNS数据库,保存着一些域名到IP地址的映射关系.同时域名服务器还必须具有连向其他域名服务器(通常是其上级域名服务器)的信息,这样当遇到本地不能进行解析的域名时,就会向其他服务器转发该解析请求.
## 电子邮件
### 电子邮件的格式
用户E-mail地址的格式为:用户名@主机域名.其中用户名是用户在邮件服务器上的信箱名,通常为用户的注册名、姓名或其他代号,主机域名则是邮件服务器的域名.用户名和主机域名之间用@分隔.由于主机域名在Internet上的唯一性,所以,只要E-mail地址中的用户名在该邮件服务器中是唯一的,则这个E-mail地址在整个Internet上也是唯一的.
### 电子邮件的协议:SMTP、POP3、IMAP
1. SMTP
    1. SMTP命令
    SMTP是个请求/响应协议,在SMTP协议25号端口监听连接请求.SMTP命令和响应都是基于ASCII文本、以命令行为单位,换行符为CR/LF.响应信息一般只有一行,有一个3位数字的代码开始,后面可以附上很简短的文字说明,也可以不附.
    2. SMTP连接和发送过程
    使用SMTP要经过建立连接、传送邮件和释放连接3个阶段,其中主要包括以下一些具体步骤:
        1. 建立TCP连接
        2. 客户端向服务器发送HELLO命令以标识发件人自己的身份,然后客户端发送MAIL命令
        3. 服务器端以OK作为响应,标明准备接受
        4. 客户端发送RCPT命令(标识单个的邮件接收人,常在MAIL命令后面),以标识该电子邮件的计划接收人,可以有多个RCPT行
        5. 服务器端则表示是否愿意为收件人接受邮件
        6. 协商结束,发送邮件,用命令DATA(在单个或多个RCPT命令后,表示所有的邮件接收人已标识,并初始化数据传输,以"."结束)发送输入内容
        7. 结束此次发送,用QUIT(结束会话)命令退出
    3. 邮件路由过程
    SMTP服务器基于DNS中的邮件交换（Mail Exchanger,MX)记录来路由电子邮件.MX记录注册了域名或相关的SMTP主机,属于该域名的电子邮件都应向该主机发送.电子邮件系统发邮件时是根据收信人的地址后缀来定位邮件服务器的.
    SMTP通过用户代理程序和邮件传输代理程序实现邮件的传输.其中用户代理程序(User Agent,UA)完成邮件的编辑、收取、阅读等功能;邮件传输代理程序(Mail Transfer Agent,MTA)则负责邮件传送到目的地.在应用中,用户代理程序和邮件传输代理程序世纪是被整合在一起的.一些常用的邮件软件都可以完成邮件的编辑和发送功能,避免用户和设置的麻烦.
2. POP3
    1. POP3命令
    POP3命令行有1个命令和一些参数组成.所有命令行以一个CRLF对结束.命令和参数可由可打印的ASCII字符组成,它们之间由空格间隔.命令一般是3~4个字母,每个参数却可达40个字符长
    2. POP3收发邮件的过程
    用户使用POP3收发邮件的过程如下：
        1. 通过POP3客户程序登录到支持POP3协议的邮件服务器,用户可发送邮件及附件
        2. 邮件服务器将为该用户首层的邮件传送给POP3的客户群,使用户收到这些邮件并将这些邮件从服务器上删除
        3. 邮件服务器再将用户提交的发送邮件,转发到运行SMTP协议的计算机中,通过它实现邮件的最终发送
        在为用户从邮件服务器收取邮件时,POP3是以该用户当前存储在服务器上全部邮件为对象进行操作的,并一次性将它们下载到用户端计算机中.一旦客户的邮件下载完毕,邮件服务器对这些邮件的暂存即告完成.使用POP3,用户不能对它们存储在邮件服务器上的邮件进行部分传输.离线工作方式适合那些从固定计算机收发邮件的用户使用.
    3. POP3的连接过程
    POP3操作开始时,服务器通过侦听TCP端口110开始服务.当客户主机需要使用服务时,它将与服务器主机建立连接.当TCP连接建立后,POP3发送确认信息.客户和POP3服务器相互(分别)交换命令和响应,这一过程一直要持续到连接终止.
    POP3遵循存储转发机制.用户可按需要在客户级与保存邮件的服务器之间建立连接.用户通过客户机上的客户邮件程序或邮件用户代理(Mail User Agent,MUA)程序将邮件服务器上的待处理的邮件取回到客户机上,同时删除服务器上已取走的邮件,并断开客户机和服务器的连接.然后,在本地客户机上进行阅读、删除、编辑或回复等脱机邮件处理.对新编辑的待发送和回复的邮件,可通过选择发送操作,再次建立客户机与服务器的连接来实现.
3. IMAP
    Internet消息访问协议(IMAP)被定义在RFC2060中,是一个功能更强大的电子邮件协议,常用的版本是4.IMAP4改进了POP3的不足,用户可以通过浏览信件头来决定是否要下载、删除或检索信件的特定部分,还可以在服务器上创建或更改文件夹或邮箱.它除支持POP3协议的脱机操作模式外,还支持连接操作和断连接操作.它为用户提供了有选择地从邮件服务器接收邮件的功能、基于服务器的信息处理功能和共享信箱功能.IMAP4提供离线、在线和断开连接3种工作方式.
    1. 离线工作方式.
    离线工作方式与POP3提供的服务类似,用户在所用的计算机与有价服务器保持连接的状态下读取邮件.用户的电子邮件从服务器全部下载到用户计算机.
    2. 在线工作方式.
    选择在线工作方式时,用户无论进行怎样的操作,其电子邮件都被保留在服务器一段.所有邮件都始终存储在可共享的邮件服务器中,并可利用客户机上的邮件程序,对邮件服务器上的邮件进行处理过程中,始终保持与该服务器的连接.在这种操作方式中,客户机对邮件服务器的操作是透明的,操作的结果作用在邮件服务器上,而操作过程显示与本地客户机上
    3. 断连接方式.
    断连接方式是一种脱机与联机操作的混合模式.在这种方式中,客户机先与邮件服务器建立连接,客户邮件程序选取相关的邮件,在本地客户机上生成一种高速缓存.与此同时,所选邮件的主拷贝仍保存在邮件服务器上,然后断掉与邮件服务器的连接,对客户机高速缓存的邮件进行"脱机"处理,以后客户机与邮件服务器再连接时,进行再同步处理使邮件状态相一致.在断连接操作中,联机和断连接操作相互补充,彼此交替进行.

## 万维网
### WWW的工作原理
WWW采用的是客户机/服务器(Client/Server)的工作模式.具体的工作流程如下:
1. 在客户端,建立连接,用户使用浏览器发送浏览信息请求
2. Web服务器接收到请求,并向浏览器返回所请求的信息
3. 关闭连接

### 超文本传输协议HTTP
HTTP协议是TCP/IP组的应用层协议之一,它不仅需要保证超文本文档在主机间的正确传输,还能确定传输文档中的哪一部分,以及传输部分内容等.通过安装在客户计算机中的浏览器程序来观察页面,浏览器取来所需的页面,解释它所包含的文本和格式化命令,并以适当的形式在品目上显示该页面.每个网站服务器有有关服务器监听端口TCP80端口,看是否有从客户端浏览器来的连接请求你.在连接建立起来后,每当客户发出一个请求,服务器就返回一个应答,然后释放连接.定义合法的请求与应答的协议就是HTTP协议.
### 统一资源定位器URL
URL是为了能够使客户端程序查询不同的信息资源时有统一的访问方法而定义的一种地址标识方法.Internet上所有的资源都有了一个URL(Union Resource Locator)地址,并且是独一无二的.只要知道某网页的URL,便可直接打开该网页.URL的完整格式如下:
协议://主机名或IP地址:端口号/路径名/文件名
协议又称为信息服务类型,是客户端浏览器服务各种服务器资源的方法,它定义了浏览器与服务器之间使用何种方式检索或传输信息.浏览器的地址栏或状态栏中URL的开始部分,表明了使用什么协议访问Internet
URL栏中的协议有很多种,常见的有:
+ http:提供了访问超文本信息的方法,是目前因特网上主要的信息服务方式
+ ftp:文件传输协议,提供在因特网上传输文件的服务
+ telnet:远程登录协议,是客户机远程登录Telnet服务器的方法
+ gopher:使用gopher协议访问gopher服务器
+ news:代表访问网络新闻服务器
+ wais:广域信息服务(Wide Area Information Service),提供广域网的信息服务检索
+ file:访问本地文件的协议

## 其它服务
### 文件传输协议FTP
FTP(File Transfer Protocol)协议是Internet上文件传输的基础,通常所说的FTP是基于该协议的一种服务.FTP文件传输服务允许Internet上的用户将一台计算机上的文件传输到另一台上,几乎所有类型的文件,包括文本文件、二进制可执行文件、声音文件、图像文件、数据压缩文件等,都可以用FTP传送.
FTP实际上是一套文件传输服务软件,它以文件传输为界面,使用简单的get或put命令进行文件的下载或上传,如同在Internet上执行文件复制命令一样.大多数FTP服务器主机都采用Unix操作系统,但普通用户通过Windows也能方便的使用FTP
FTP最大的特点是用户可以使用Internet上众多的匿名FTP服务器.所谓匿名服务器,指的是不需要专门的用户名和口令就可进入系统.用户连接匿名FTP服务器时,都可以使用"anonymous"(匿名)作为用户名,以自己的E-mail地址作为可伶登录.登录成功后,用户便可从匿名服务器上下载文件.匿名服务器的标准目录为pub,用户通常可以访问该目录下的子目录中的文件.考虑到安全问题,大多数匿名服务器不允许用户上传文件.
### 远程登录Telnet
Telnet是Internet远程登录服务的一个协议,该协议定义了远程登录用户与服务器交互的方式.Telnet允许用户在一台联网的计算机上登录到一个远程分时系统中,然后像使用自己的计算机一样使用该远程系统.
要使用远程登录服务,必须在本地计算机上启动一个客户应用程序,指定远程计算机的名字,并通过Internet与之建立连接.一旦连接成功,本地计算机就像通常的终端一样,直接访问远程计算机系统的资源.远程登录软件允许用户直接与远程计算机交互,通过键盘或鼠标操作,客户应用程序将有关的信息发送给远程计算机,再由服务器将输出结果返回给用户.用户退出远程登录后,用户的键盘、显示控制权又回到本地计算机.一般用户可以通过Windows的Telnet客户程序进行远程登录
### 电子公告板系统BBS
电子公告板系统BBS(Bulletin Board System)就是一个完全开放的、电子形式的公告牌系统.BBS系统允许Internet用户注册进入系统(商业系统要收取一定的费用),一般说来,它们大都提供一些共同的基本的服务,有的BBS系统还向用户提供交换软件及其它网络服务.
基于WWW服务的BBS系统在实现了讨论区功能同时,还在服务商提供更多的优点.首先,它以环球网站点或主页的形式提供,这就使得它们更容易连接,不需要转变的Telnet软件,使用浏览器就可以访问;其次,它们是有CGI程序、Java程序或ASP程序编写的,以主页的形式提供,用户可以在讨论过程中使用HTML命令,这样就可以在讨论的文章中使用不同的字体字号并嵌入图形,进一步丰富了讨论的表达形式.由于这些优点,是的这些BBS系统受到互联网用户的格外青睐,并在很短的时间内,在环球网上迅速的普及开来.